import logging
import os
import json

from fastf1.livetiming.clientmod2 import SignalRClientMod2


data = json.load(open('/config/config.json'))

WLED_GREEN = data['wled_green']
#WLED_YELLOW = data['wled_yellow']
WLED_RED = data['wled_red']
WLED_SC = data['wled_sc']
WLED_CHEQUERED = data['wled_checkered']
WLED_TRACKCLEAR = data['wled_trackclear']
WLED_HOST = data['wled_host']
WLED_DELAY = data['wled_delay']

client = SignalRClientMod2(WLED_GREEN=WLED_GREEN, WLED_TRACKCLEAR=WLED_TRACKCLEAR, WLED_RED=WLED_RED, WLED_CHEQUERED=WLED_CHEQUERED, WLED_SC=WLED_SC, WLED_HOST=WLED_HOST, WLED_DELAY=WLED_DELAY, debug=False)

#str='{"R":{"Heartbeat":{"Utc":"2024-06-09T20:11:11.5630084Z","_kf":true},"RaceControlMessages":{"Messages":[{"Utc":"2024-06-09T17:07:10","Category":"Other","Message":"PINK HEAD PADDING MATERIAL MUST BE USED"},{"Utc":"2024-06-09T17:20:01","Lap":1,"Category":"Flag","Flag":"GREEN","Scope":"Track","Message":"GREEN LIGHT - PIT EXIT OPEN"},{"Utc":"2024-06-09T17:20:11","Lap":1,"Category":"Other","Message":"LOW GRIP CONDITIONS"},{"Utc":"2024-06-09T17:30:01","Lap":1,"Category":"Other","Message":"PIT EXIT CLOSED"},{"Utc":"2024-06-09T17:45:09","Lap":1,"Category":"Other","Message":"RISK OF RAIN FOR F1 RACE IS 100%"},{"Utc":"2024-06-09T17:57:05","Lap":1,"Category":"Drs","Status":"DISABLED","Message":"DRS DISABLED"},{"Utc":"2024-06-09T18:03:12","Lap":1,"Category":"Flag","Flag":"GREEN","Scope":"Track","Message":"GREEN LIGHT - PIT EXIT OPEN"},{"Utc":"2024-06-09T18:03:36","Lap":1,"Category":"Flag","Flag":"YELLOW","Scope":"Sector","Sector":2,"Message":"YELLOW IN TRACK SECTOR 2"},{"Utc":"2024-06-09T18:03:38","Lap":1,"Category":"Flag","Flag":"CLEAR","Scope":"Sector","Sector":2,"Message":"CLEAR IN TRACK SECTOR 2"},{"Utc":"2024-06-09T18:04:03","Lap":1,"Category":"Other","Message":"TRACK SURFACE SLIPPERY IN TRACK SECTOR 2"},{"Utc":"2024-06-09T18:05:38","Lap":2,"Category":"Flag","Flag":"CLEAR","Scope":"Sector","Sector":2,"Message":"CLEAR IN TRACK SECTOR 2"},{"Utc":"2024-06-09T18:06:00","Lap":2,"Category":"Other","Message":"TURN 2 INCIDENT INVOLVING CARS 10 (GAS) AND 11 (PER) NOTED - CAUSING A COLLISION"},{"Utc":"2024-06-09T18:06:14","Lap":2,"Category":"Other","Message":"CAR 16 (LEC) LAP DELETED - TRACK LIMITS AT TURN 14 LAP 1 14:04:57"},{"Utc":"2024-06-09T18:07:21","Lap":3,"Category":"Other","Message":"CAR 63 (RUS) TIME 1:36.556 DELETED - TRACK LIMITS AT TURN 14 LAP 2 14:06:24"},{"Utc":"2024-06-09T18:08:01","Lap":3,"Category":"Other","Message":"FIA STEWARDS: TURN 2 INCIDENT INVOLVING CARS 10 (GAS) AND 11 (PER) REVIEWED NO FURTHER INVESTIGATION - CAUSING A COLLISION"},{"Utc":"2024-06-09T18:09:16","Lap":4,"Category":"Other","Message":"CAR 2 (SAR) TIME 1:41.749 DELETED - TRACK LIMITS AT TURN 14 LAP 3 14:08:23"},{"Utc":"2024-06-09T18:12:26","Lap":6,"Category":"Flag","Flag":"YELLOW","Scope":"Sector","Sector":6,"Message":"YELLOW IN TRACK SECTOR 6"},{"Utc":"2024-06-09T18:12:30","Lap":6,"Category":"Other","Message":"CAR 2 (SAR) TIME 1:38.360 DELETED - TRACK LIMITS AT TURN 2 LAP 5 14:10:19"},{"Utc":"2024-06-09T18:12:47","Lap":6,"Category":"Flag","Flag":"CLEAR","Scope":"Sector","Sector":6,"Message":"CLEAR IN TRACK SECTOR 6"},{"Utc":"2024-06-09T18:14:15","Lap":7,"Category":"Other","Message":"CAR 2 (SAR) TIME 1:58.326 DELETED - TRACK LIMITS AT TURN 6 LAP 6 14:12:33"},{"Utc":"2024-06-09T18:14:54","Lap":8,"Category":"Other","Message":"CAR 44 (HAM) TIME 1:35.866 DELETED - TRACK LIMITS AT TURN 2 LAP 7 14:13:17"},{"Utc":"2024-06-09T18:14:56","Lap":8,"Category":"Other","Message":"CAR 14 (ALO) TIME 1:36.320 DELETED - TRACK LIMITS AT PIT ENTRY LAP 6 14:13:01"},{"Utc":"2024-06-09T18:16:38","Lap":9,"Category":"Other","Message":"INCIDENT INVOLVING CAR 3 (RIC) NOTED - FALSE START"},{"Utc":"2024-06-09T18:19:20","Lap":11,"Category":"Other","Message":"FIA STEWARDS: INCIDENT INVOLVING CAR 3 (RIC) UNDER INVESTIGATION - FALSE START"},{"Utc":"2024-06-09T18:21:12","Lap":12,"Category":"Other","Message":"FIA STEWARDS: 5 SECOND TIME PENALTY FOR CAR 3 (RIC) - FALSE START"},{"Utc":"2024-06-09T18:24:37","Lap":14,"Category":"Other","Message":"CAR 2 (SAR) TIME 1:32.818 DELETED - TRACK LIMITS AT TURN 1 LAP 13 14:23:05"},{"Utc":"2024-06-09T18:29:17","Lap":18,"Category":"Drs","Status":"ENABLED","Message":"DRS ENABLED"},{"Utc":"2024-06-09T18:29:20","Lap":18,"Category":"Other","Message":"CAR 1 (VER) TIME 1:29.256 DELETED - TRACK LIMITS AT TURN 2 LAP 17 14:27:55"},{"Utc":"2024-06-09T18:31:20","Lap":19,"Category":"Other","Message":"CAR 23 (ALB) TIME 1:28.734 DELETED - TRACK LIMITS AT TURN 14 LAP 17 14:29:59"},{"Utc":"2024-06-09T18:33:35","Lap":21,"Category":"Other","Message":"TURN 13 INCIDENT INVOLVING CARS 22 (TSU) AND 23 (ALB) NOTED"},{"Utc":"2024-06-09T18:36:26","Lap":23,"Category":"Other","Message":"TURN 14 INCIDENT INVOLVING CARS 63 (RUS) AND 1 (VER) NOTED - REJOINING UNSAFELY"},{"Utc":"2024-06-09T18:37:17","Lap":23,"Category":"Other","Message":"FIA STEWARDS: TURN 13 INCIDENT INVOLVING CARS 22 (TSU) AND 23 (ALB) REVIEWED NO FURTHER INVESTIGATION"},{"Utc":"2024-06-09T18:37:29","Lap":23,"Category":"Other","Message":"CAR 63 (RUS) TIME 1:28.455 DELETED - TRACK LIMITS AT TURN 14 LAP 21 14:34:54"},{"Utc":"2024-06-09T18:37:52","Lap":24,"Category":"Flag","Flag":"BLUE","Scope":"Driver","RacingNumber":"2","Message":"WAVED BLUE FLAG FOR CAR 2 (SAR) TIMED AT 14:37:52"},{"Utc":"2024-06-09T18:38:34","Lap":24,"Category":"Flag","Flag":"BLUE","Scope":"Driver","RacingNumber":"24","Message":"WAVED BLUE FLAG FOR CAR 24 (ZHO) TIMED AT 14:38:33"},{"Utc":"2024-06-09T18:39:41","Lap":25,"Category":"Flag","Flag":"YELLOW","Scope":"Sector","Sector":4,"Message":"YELLOW IN TRACK SECTOR 4"},{"Utc":"2024-06-09T18:39:42","Lap":25,"Category":"Flag","Flag":"YELLOW","Scope":"Sector","Sector":3,"Message":"YELLOW IN TRACK SECTOR 3"},{"Utc":"2024-06-09T18:39:52","Lap":25,"Category":"Flag","Flag":"DOUBLE YELLOW","Scope":"Sector","Sector":4,"Message":"DOUBLE YELLOW IN TRACK SECTOR 4"},{"Utc":"2024-06-09T18:40:26","Lap":25,"Category":"SafetyCar","Status":"DEPLOYED","Mode":"SAFETY CAR","Message":"SAFETY CAR DEPLOYED"},{"Utc":"2024-06-09T18:42:13","Lap":26,"Category":"Other","Message":"CAR 11 (PER) TIME 1:31.463 DELETED - TRACK LIMITS AT TURN 9 LAP 21 14:35:23"},{"Utc":"2024-06-09T18:44:45","Lap":27,"Category":"Flag","Flag":"DOUBLE YELLOW","Scope":"Sector","Sector":4,"Message":"DOUBLE YELLOW IN TRACK SECTOR 4"},{"Utc":"2024-06-09T18:45:29","Lap":28,"Category":"Other","Message":"RECOVERY VEHICLE ON TRACK AT TURN 4"},{"Utc":"2024-06-09T18:47:28","Lap":29,"Category":"Flag","Flag":"DOUBLE YELLOW","Scope":"Sector","Sector":4,"Message":"DOUBLE YELLOW IN TRACK SECTOR 4"}],"_kf":true}},"I":"0"}'
